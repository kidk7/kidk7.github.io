<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Yam Archive</title>
  <style>
    body { font-family: 'Arial', sans-serif; margin: 0; background: #fffbe7; color: #4e3900; }
    header {
      background: #ffda3c; color: #4e3900;
      border-bottom: 3px solid #ecc700;
      box-shadow: 0 2px 8px rgba(255,218,60,0.15);
      position: relative; padding: 32px 0 24px 0; margin-bottom:0;
      display:flex; justify-content:center; align-items:center;
    }
    #siteName {
      font-weight: 800; font-size: 2em;
      border: 3.5px solid #e7be17; border-radius: 18px; 
      padding: 14px 40px; background:#fffde8;
      box-shadow:0 2px 14px rgba(255,220,70,0.18);
    }
    .header-right {
      position: absolute; right: 5vw; top: 32px; display: flex; gap: 10px;
    }
    .header-link { color: #ad8e01; font-weight: 650; text-decoration: none; }
    .header-link:hover { color: #d5ad00; }

    /* í•„í„° ì˜ì—­ ë¬¶ì–´ì„œ */
    .filter-wrapper {
      background: #fff2b2;
      padding: 14px 0 20px 0;
      border-bottom: 1.5px solid #fded8d;
      margin: 0 auto 12px auto;
      max-width: 720px;
      display: flex; flex-direction: column; gap: 10px; align-items: center;
    }
    .filter-bar { display: flex; gap: 14px; flex-wrap: wrap; justify-content: center; }
    .filter-bar button {
      background: #ffe065; border: none; border-radius: 7px;
      padding: 8px 18px; cursor: pointer; font-weight: 700; 
      color: #855900; font-size: 0.95rem;
    }
    .filter-bar button.active {
      background: #ffe998; color: #d5ad00; outline: 2px solid #ffe065;
    }
    
    #rankingBox {
      position: absolute; left: 20px; top: 85px; 
      background: #fffbe7; border: 2px solid #e7be17;
      border-radius: 12px; padding: 20px 24px;
      min-width: 170px;
      box-shadow: 0 2px 14px rgba(255,220,70,0.14);
      font-size: 0.95em;
    }

    #restaurantList { max-width: 660px; margin: 0 auto 24px auto; background: #fffde8;
      padding: 25px 22px; border-radius: 12px; box-shadow: 0 2px 13px rgba(255,215,57,0.13);}
    ul.restaurants { list-style: none; padding: 0; margin: 0; }
    .restaurant-item {
      display: flex; align-items: center; gap: 18px;
      border-bottom: 1px solid #fee975; padding: 18px 0;
      cursor: pointer;
    }
    .restaurant-name { font-size: 1.18em; font-weight: 700; }
    .dish-name { font-size: 0.95em; color: #c98800; margin-top: 5px;}
    .thumb { width: 80px; height: 80px; object-fit: cover; border-radius: 10px; }

    /* ëª¨ë‹¬ */
    .modal-bg {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background:rgba(60,50,10,0.24);
      display: none; align-items: center; justify-content: center; z-index: 1001;
    }
    .modal-box {
      background: #fffde8; min-width: 320px; max-width: 92vw; padding: 28px 34px 19px 34px;
      border-radius:16px; box-shadow: 0 10px 32px rgba(80,60,0,0.19);
      position: relative; display: flex; flex-direction: column; align-items: center; text-align: center;
    }
    .modal-box h3 {
      margin: 6px 0 11px 0; font-size: 1.34em; color: #be9003;
    }
    .modal-box img {
      width: 110px; height: 110px; object-fit: cover; border-radius: 13px; margin-bottom: 20px;
    }
    .modal-box .addrs {
      font-size: 1.04em; color: #666500; margin: 3px 0 7px 0;
    }
    .modal-box .menus {
      font-weight: 600; margin-top: 10px; font-size: 1.07em;
    }
    .modal-box .clickCount {
      margin-top: 8px; font-size: 0.95em; color: #855900;
    }
    .close-btn {
      position: absolute; top: 7px; right: 15px; background: #ffd700; border: none;
      color: #874c00; font-size: 1.5em; cursor: pointer; border-radius: 50%; width: 33px; height: 33px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <span id="siteName">Yam Archive</span>
    <div class="header-right">
      <a href="#" class="header-link">ë¡œê·¸ì¸</a>
      <a href="#" class="header-link">ê³ ê°ì„¼í„°</a>
    </div>
  </header>

  <div id="rankingBox">
    <h4>ğŸ½ï¸ ì¸ê¸° ë­í‚¹</h4>
    <ol id="rankingList"></ol>
  </div>

  <div class="filter-wrapper">
    <div class="filter-bar" id="categoryBar">
      <button class="active" data-cat="ê±´ëŒ€ì…êµ¬">ê±´ëŒ€ì…êµ¬</button>
      <button data-cat="ì¤‘ë¬¸">ì¤‘ë¬¸</button>
      <button data-cat="í›„ë¬¸">í›„ë¬¸</button>
      <button data-cat="ì–´ë¦°ì´ëŒ€ê³µì›">ì–´ë¦°ì´ëŒ€ê³µì›</button>
    </div>
    <div class="filter-bar" id="dietBar">
      <button data-tag="vegan">ë¹„ê±´</button>
      <button data-tag="halal">í• ë„</button>
      <button data-tag="glutenfree">ê¸€ë£¨í…í”„ë¦¬</button>
      <button data-tag="under10k">ë§Œì›ì´í•˜</button>
    </div>
  </div>

  <section id="restaurantList"></section>

  <div id="modalBg" class="modal-bg">
    <div class="modal-box">
      <button class="close-btn" onclick="closeModal()">&times;</button>
      <img id="modalImg" src="" alt="ì‹ë‹¹ ì´ë¯¸ì§€" />
      <h3 id="modalName"></h3>
      <div class="addrs" id="modalAddr"></div>
      <div class="menus" id="modalMenus"></div>
      <div class="clickCount" id="modalClicks"></div>
    </div>
  </div>

<script>
  const WHITE_IMG = "https://via.placeholder.com/80x80/FFFFFF/FFFFFF?text=+";

  const kunUniImgs = [
    "https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20171222_273%2F1513909993152wbpV8_JPEG%2FfM-4sk2LkYUe0jmd83plu51X.JPG.jpg",
    "https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20221105_150%2F1667640635518fdmMX_JPEG%2F01_%BE%D7%BC%C7%C4%C6-6.jpg",
    "", "", "",
    "", "", "", "", "",
    "", "", "", "", "",
    "", "", "", "", ""
  ];

  const data = {
    "ê±´ëŒ€ì…êµ¬": [
      {name: "ì†¡í™”ì‚°ì‹œë„ì‚­ë©´", menu: "ë¹„ë¹”ë°¥", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ê±´ëŒ€ì…êµ¬ë¡œ 123", img: kunUniImgs[0], tags: ["vegan"]},
      {name: "ì •ë©´ ê±´ëŒ€", menu: "ìš°ë™", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ìì–‘ë™ 456", img: kunUniImgs[1], tags: []},
      {name: "ëª¨ì¸ ì»¤í”¼ ê±´ëŒ€", menu: "ì´ˆë°¥", addr: "ì„œìš¸ ê´‘ì§„êµ¬ í™”ì–‘ë™ 78", img: WHITE_IMG, tags: ["vegan", "under10k"]},
      {name: "í•˜ì´ë””ë¼ì˜¤ ê±´ëŒ€ì ", menu: "ë‹­í•œë§ˆë¦¬", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ìì–‘ë™ 9", img: WHITE_IMG, tags: []},
      {name: "ìš°ë§ˆì´ë„ ê±´ëŒ€ì ", menu: "ê¹Œë¥´ë³´ë‚˜ë¼", addr: "ì„œìš¸ ê´‘ì§„êµ¬ êµ°ìì—­ë¡œ 6", img: WHITE_IMG, tags: []},
      {name: "ë¯¸ë¶„ë‹¹ ê±´ëŒ€", menu: "ìŠ¤í…Œì´í¬", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ëŠ¥ë™ë¡œ 20", img: WHITE_IMG, tags: ["glutenfree"]},
      {name: "ê³„íƒ„ì§‘", menu: "ì§¬ë½•", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ì–´ë¦°ì´ëŒ€ê³µì›ë¡œ 11", img: WHITE_IMG, tags: []},
      {name: "í•µë°¥ ê±´ëŒ€ì ", menu: "ëˆì¹´ì¸ ", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ê±´êµ­ëŒ€ë¡œ 15", img: WHITE_IMG, tags: ["vegan", "under10k"]},
      {name: "ë°±ì†Œì • ê±´ëŒ€ë³¸ì ", menu: "ì•„ë©”ë¦¬ì¹´ë…¸", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ìì–‘ë¡œ 12", img: WHITE_IMG, tags: []},
      {name: "ê³ ë² ê·œì¹´ì¸  ê±´ëŒ€ë³¸ì ", menu: "ë¹„ë¹”ë°¥", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ìì–‘ë¡œ 122", img: WHITE_IMG, tags: []},
      {name: "ì„±ìˆ˜ì™„ë‹¹ ë³¸ì ", menu: "ìŠ¤í…Œì´í¬", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ì„±ìˆ˜ë™", img: WHITE_IMG, tags: ["halal"]},
      {name: "ì˜¤ìœ ë¯¸ë‹¹ ê±´ëŒ€ì ", menu: "ì´ˆë°¥", addr: "ì„œìš¸ ê´‘ì§„êµ¬ êµ°ìì—­ë¡œ 33", img: WHITE_IMG, tags: []},
      {name: "í™”ê¸°ì• ì•  ë³¸ì ", menu: "ëˆì¹´ì¸ ", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ê±´ëŒ€ì…êµ¬ 3ê°€", img: WHITE_IMG, tags: []},
      {name: "ê³ í¥ìˆœëŒ€êµ­", menu: "ì§¬ë½•", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ìì–‘ë™", img: WHITE_IMG, tags: []},
      {name: "ë¯¼ì •ì‹ë‹¹", menu: "ë¹„ë¹”ë°¥", addr: "ì„œìš¸ ê´‘ì§„êµ¬ í™”ì–‘ë™ 5", img: WHITE_IMG, tags: ["under10k"]},
      {name: "ë•ê°ìíƒ• ì „ë¬¸ì ", menu: "ë‹­í•œë§ˆë¦¬", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ìì–‘ë™ 55", img: WHITE_IMG, tags: []},
      {name: "ì•„ì°Œë–¡ë³¶ì´", menu: "ëˆì¹´ì¸ ", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ì–´ë¦°ì´ëŒ€ê³µì›ë¡œ 9", img: WHITE_IMG, tags: []},
      {name: "í•¨í¥ë³¸ê°€ë©´ì˜¥ ê±´ëŒ€ì ", menu: "ì•„ë©”ë¦¬ì¹´ë…¸", addr: "ì„œìš¸ ê´‘ì§„êµ¬ êµ°ìì—­ë¡œ 7", img: WHITE_IMG, tags: []},
      {name: "ë™í•´í•´ë¬¼", menu: "ë¹„ë¹”ë°¥", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ê´‘ì§„êµ¬ì²­", img: WHITE_IMG, tags: []},
      {name: "ë” í´ë˜ì‹ 500 ë¼êµ¬ëœ¨", menu: "ìŠ¤í…Œì´í¬", addr: "ì„œìš¸ ê´‘ì§„êµ¬ í™”ì–‘ë™ 2", img: WHITE_IMG, tags: []}
    ],
    "ì¤‘ë¬¸": [
      {name: "ë‘ì°œ ê±´ëŒ€ì ", menu: "ì°œë‹­", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ì¤‘ê³¡ë™ 12", img: WHITE_IMG, tags: []},
      {name: "ì •ë©´ êµ­ìˆ˜", menu: "êµ­ìˆ˜", addr: "ì„œìš¸ ê´‘ì§„êµ¬ ì¤‘ê³¡ë™ 8", img: WHITE_IMG, tags: []},
      {name: "ë‚´ê°€ì°œí•œë‹­ ê±´êµ­ëŒ€ì ", menu: "ë‹­ê°ˆë¹„", addr: "ì„œìš¸ ê´‘ì§„êµ¬ êµ°ìë™ 14", img: WHITE_IMG, tags: []}
    ],
    "í›„ë¬¸": [
      {name: "ì‹œí™ì“° ê±´ëŒ€", menu: "ë³¶ìŒë°¥", addr: "ì„œìš¸ ê´‘ì§„êµ¬ í›„ë¬¸ë¡œ 112", img: WHITE_IMG, tags: []}
    ],
    "ì–´ë¦°ì´ëŒ€ê³µì›": [
      {name: "ì—ì´ë¿”ë¨ êµ°ìì ", menu: "ì–‘ê³ ê¸°êµ¬ì´", addr: "ì„œìš¸ ê´‘ì§„êµ¬ êµ°ìë™ 50", img: WHITE_IMG, tags: []}
    ]
  };

  // localStorageì—ì„œ ë¶ˆëŸ¬ì˜¨ ì¡°íšŒìˆ˜ ì €ì¥ ê°ì²´ (ì—†ìœ¼ë©´ ë¹ˆ ê°ì²´)
  let restaurantClicks = JSON.parse(localStorage.getItem('restaurantClicks') || '{}');

  let currentCategory = "ê±´ëŒ€ì…êµ¬";
  let currentDietTags = [];

  // ìœ„ì¹˜ í•„í„° í´ë¦­ ì´ë²¤íŠ¸
  document.querySelectorAll('#categoryBar button').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#categoryBar button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentCategory = btn.dataset.cat;
      renderRestaurants();
    });
  });

  // ì‹ë‹¨ í•„í„° í´ë¦­ ì´ë²¤íŠ¸ (í† ê¸€)
  document.querySelectorAll('#dietBar button').forEach(btn => {
    btn.addEventListener('click', () => {
      const tag = btn.dataset.tag;
      if(currentDietTags.includes(tag)){
        currentDietTags = currentDietTags.filter(t => t !== tag);
        btn.classList.remove('active');
      } else {
        currentDietTags.push(tag);
        btn.classList.add('active');
      }
      renderRestaurants();
    });
  });

  // í•„í„° ì ìš©í•´ì„œ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
  function filterRestaurants(){
    let list = data[currentCategory] || [];
    if(currentDietTags.length === 0) return list;
    return list.filter(r => currentDietTags.every(tag => r.tags.includes(tag)));
  }

  // localStorageì— ì¡°íšŒìˆ˜ ì €ì¥ ë° ë­í‚¹ ì—…ë°ì´íŠ¸
  function increaseClick(name) {
    if (!restaurantClicks[name]) {
      restaurantClicks[name] = 0;
    }
    restaurantClicks[name]++;
    localStorage.setItem('restaurantClicks', JSON.stringify(restaurantClicks));
    updateRanking();
  }

  // ë­í‚¹ ëª©ë¡ ê°±ì‹ 
  function updateRanking() {
    const rankingArr = Object.entries(restaurantClicks).sort((a,b) => b[1] - a[1]).slice(0, 10);
    const rankingList = document.getElementById('rankingList');
    rankingList.innerHTML = "";
    rankingArr.forEach(([name, count]) => {
      const li = document.createElement('li');
      li.textContent = `${name} (${count}íšŒ)`;
      rankingList.appendChild(li);
    });
  }

  // ì‹ë‹¹ ëª©ë¡ ë Œë”ë§
  function renderRestaurants() {
    const container = document.getElementById('restaurantList');
    container.innerHTML = "";
    const list = filterRestaurants();

    if(!list.length){
      container.innerHTML = "<p>ì¡°ê±´ì— ë§ëŠ” ì‹ë‹¹ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
      return;
    }

    const ul = document.createElement('ul');
    ul.className = "restaurants";

    list.forEach(r => {
      const li = document.createElement('li');
      li.className = "restaurant-item";
      li.innerHTML = `
        <img src="${r.img || WHITE_IMG}" alt="${r.name}" class="thumb" />
        <div>
          <div class="restaurant-name">${r.name}</div>
          <div class="dish-name">${r.menu}</div>
        </div>
      `;
      li.onclick = () => {
        increaseClick(r.name);
        openModal(r);
      };
      ul.appendChild(li);
    });

    container.appendChild(ul);
  }

  // ëª¨ë‹¬ ì—´ê¸°
  function openModal(r) {
    document.getElementById('modalImg').src = r.img || WHITE_IMG;
    document.getElementById('modalName').textContent = r.name;
    document.getElementById('modalAddr').textContent = "ì£¼ì†Œ: " + (r.addr || "ì •ë³´ ì—†ìŒ");
    document.getElementById('modalMenus').textContent = "ëŒ€í‘œë©”ë‰´: " + (r.menu || "ì •ë³´ ì—†ìŒ");
    document.getElementById('modalClicks').textContent = "ì¡°íšŒìˆ˜: " + (restaurantClicks[r.name] || 0) + "íšŒ";
    document.getElementById('modalBg').style.display = 'flex';
  }

  // ëª¨ë‹¬ ë‹«ê¸°
  function closeModal() {
    document.getElementById('modalBg').style.display = 'none';
  }

  // ë°°ê²½ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
  document.getElementById('modalBg').onclick = function(e) {
    if(e.target === this) closeModal();
  };

  // ì´ˆê¸° ë Œë”ë§
  renderRestaurants();
  updateRanking();
</script>
</body>
</html>
